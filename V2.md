# V2 Modules

V2 introduces both core hardening and ecosystem packages on top of Virex runtime.

## Core hardening (breaking semantics)

Path: `lib/src/core`

- `VirexRuntimeConfig` and `VirexWriteViolationPolicy`
- Default `hardFail` behavior for writes during `COMPUTING`
- Deferred-write queue for optional `deferNextEpoch` policy
- Scheduler metrics snapshot API
- Structured invariant diagnostics
- Effect loop cooloff containment
- Trace ring buffer exposed via `VirexInspector`

## Milestone 1: Adoption

### `virex_riverpod_bridge`
Path: `packages/virex_riverpod_bridge`

- `riverpodSignalProvider<T>(Signal<T>)`
- `signalFromStateNotifier<T>(StateNotifier<T>)`
- migration report helpers

### `virex_bloc_bridge`
Path: `packages/virex_bloc_bridge`

- `signalFromCubit<S>(Cubit<S>)`
- `effectToBlocEvent<E>(emit)`
- migration report helpers

### Production reference app
Path: `examples/production_reference_app`

- clean architecture style feature modules
- migration-ready structure for startup teams

## Milestone 2: Tooling

### `virex_devtools`
Path: `packages/virex_devtools`

- `VirexDevtoolsPanel` widget for runtime inspection
- epoch/phase counters and node summaries

### `virex_observability`
Path: `packages/virex_observability`

- `VirexTelemetrySink`
- `VirexTelemetryBridge` to stream inspector events

### `virex_testkit`
Path: `packages/virex_testkit`

- `VirexTestHarness`
- `VirexPerfBudget`

### Core inspector upgrades
Path: `lib/src/debug/inspector.dart`

- `VirexInspector.events`
- `configureSampling({int maxEventsPerSecond})`
- `enableTimeline({bool enabled})`

## Milestone 3: Ecosystem

### `virex_persist`
Path: `packages/virex_persist`

- `PersistedSignalPolicy`
- `SharedPreferencesVirexStore`
- `HiveVirexStore`
- `EncryptedVirexStore`

### `virex_router_bridge`
Path: `packages/virex_router_bridge`

- `RouterSignalAdapter`

### `virex_forms`
Path: `packages/virex_forms`

- `FormSignalController`

### Compatibility and certification docs
- `docs/ecosystem/COMPATIBILITY_MATRIX.md`
- `docs/ecosystem/CERTIFICATION_PROGRAM.md`

## Tooling updates

- CI validates root package and all V2 packages
- Release workflow validates all V2 packages
- Coverage, benchmark, regression, and performance budget checks are enforced
